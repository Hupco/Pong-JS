<!Doctype html!>
<html lang="pl">
<head>
<meta charset="utf-8">
<title>Pong JS</title>
</head>
<body>
<style>
	body{
		margin:0;
		padding:0;
		display:flex;
		align-items:center;
		justify-content:center ;
		height:100vh;
		background-color: darkgray
	
	
	}
	

	canvas{
		
		border: solid 2px white;
	
	}

	


</style>

<canvas></canvas>
<script>
	const canvas = document.querySelector('canvas');
	const ctx = canvas.getContext('2d');
	//rozmaiaryry pola
	canvas.width = 1000;
	canvas.height = 500;
	
	const canszer = canvas.width;
	const canwys = canvas.height; 
	const ballS=20;//srednica pilki(wysokosc , szerokosc);
	//Polozenie startowe
	let bX = canszer/2-ballS/2;
	let bY = canwys/2-ballS/2;
	//rozmiar paleczki 
	const paleczkaWys = 100;
	const paleczkaSzer = 20;
	//polozenie paleczek (na osi x)
	const graczX = 70;
	const botX= 910; 
	//polozenie paleczek (na osi y)
	let graczY = 200;
	let botY= 200; 
	//rozmiar kresek podzialu
	const kreskiWidth = 6;
	const kreskiHeight = 16;
	
	let ballVX = -1;
	let ballVY = 1;
	
	function gracz(){
	ctx.fillStyle="red";
	ctx.fillRect(graczX,graczY,paleczkaSzer,paleczkaWys);

	}
	function bot(){
	ctx.fillStyle='#0000ff';
	ctx.fillRect(botX,botY,paleczkaSzer,paleczkaWys);

	}
	
	
	function ball(){
	ctx.fillStyle="white";
	ctx.fillRect(bX,bY,ballS,ballS);
	
	
	bX+=ballVX;
	bY+=ballVY;
	
		if(bY<=0 || bY +ballS>=canwys){
		ballVY=-ballVY;
		acceleration()
		}
		
		if(bX<=0 || bX +ballS>=canszer){
		ballVX=-ballVX;
		acceleration()
		}

	}
	
	function table(){
		//Stół
		ctx.fillStyle = 'black'; //zmiana koloru
		ctx.fillRect(0,0,canszer,canwys);  // wypełneinie przestrzenią (x0,y0,xk,yk)
		
	
		for(let lp = 20;lp<canwys;lp+=30){ //kreski podzialu (lp-pozycja lini)
		ctx.fillStyle = "gray";
		ctx.fillRect(canszer/2-kreskiWidth/2,lp,kreskiWidth,kreskiHeight);
	
		}
	
		
	}
	
	topCanvas= canvas.offsetTop; //odleglosc canvasa od gory strony
	console.log(topCanvas)
	
	function pozycjaGracza(p){
	//console.log("pozycja myszy"+(p.clientY-topCanvas)+"||"+(p.clientY))
	graczY = p.clientY-topCanvas -paleczkaWys/2;
	
	//ograniczenia
	if(graczY>=canwys-paleczkaWys){
		graczY=canwys -paleczkaWys;
		}
	if(graczY<=0){
		graczY=0;
		}

	//botY=graczY //TEST
	
	}
	
	function acceleration(){
		console.log("przyspiesza" + "||"+Math.abs(ballVX))
		if(ballVX > 0 && ballVX <16){
		ballVX +=1;
		}
		else if(ballVX < 0 && ballVX >-16){
			ballVX -=1;
			}
		if(ballVY > 0 && ballVY <16){
		ballVY +=1;
		}
		else if(ballVY < 0 && ballVY >-16){
			ballVY -=1;
			}
		
		
	}
	
	//AI
	
	function pozycjaBota(){
	
	
	
	}
	
	
	
	//nasluchiwanie zdarzenia (ruchu myszką)
	canvas.addEventListener("mousemove",pozycjaGracza)
	
	function rysuj(){
	table(); //zamalowywuje  na czrno
	ball(); //tworzy pilke
	gracz();//gracza
	bot();// i bota
	pozycjaBota();
	
	}
	setInterval(rysuj,1000/60) //60 klatek na sekunde
	
	</script>

</body>
</html>

